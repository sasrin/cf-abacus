#!/bin/bash

# Push all the Abacus apps to Cloud Foundry
CONF=default
if [ -n "$1" ]; then
  CONF=$1
fi

etc/apps/$CONF | awk '{
  if ($3 != "") {
    printf "(cd %s && npm run cfpush -- -i %s)\n", $2, $3;
  }
  else {
    printf "(cd %s && npm run cfpush)\n", $2;
  }
}' | bash -xe

